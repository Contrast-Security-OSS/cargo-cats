# Use OpenJDK 11 as the base image
FROM eclipse-temurin:11-jre-jammy

# Set working directory
WORKDIR /app

# Install curl to download the jar file
RUN apt-get update && \
    apt-get install -y curl && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Previously we fetched the JAR from GitHub using curl, but filename and 
# location changed upstream, resulting in a 404 error and build failure. 
# Instead, lets pin the JAR in our repo:
#   Old Jar: JNDI-Exploit-Kit-1.0-SNAPSHOT-all.jar
#Â   New Jar: JNDI-Exploit-Kit.jar
COPY JNDI-Exploit-Kit.jar ./

# Expose common ports that the exploit kit might use
EXPOSE 1389 8180 9999

# Run the JNDI-Exploit-Kit
CMD ["java", "-jar", "JNDI-Exploit-Kit.jar"]
